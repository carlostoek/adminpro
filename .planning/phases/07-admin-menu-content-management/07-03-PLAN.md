---
phase: 07-admin-menu-content-management
plan: 03
type: execute
wave: 3
depends_on: [07-01, 07-02]
files_modified: [bot/states/admin.py]
autonomous: true

must_haves:
  truths:
    - "Admin puede iniciar wizard de creación de paquete"
    - "Wizard recopila datos paso a paso (nombre → tipo → precio → descripción)"
    - "Admin puede cancelar wizard en cualquier paso"
    - "FSM states se limpian correctamente al cancelar/completar"
  artifacts:
    - path: "bot/states/admin.py"
      provides: "ContentPackageStates FSM state group for creation wizard"
      contains: "class ContentPackageStates(StatesGroup)"
      exports: ["waiting_for_name", "waiting_for_type", "waiting_for_price", "waiting_for_description"]
  key_links:
    - from: "bot/handlers/admin/content.py (plan 07-04)"
      to: "bot/states/admin.py"
      via: "ContentPackageStates state references"
      pattern: "ContentPackageStates\\.(waiting_for_name|waiting_for_type|waiting_for_price|waiting_for_description)"
---

<objective>
Add ContentPackageStates FSM state group to bot/states/admin.py for multi-step content package creation wizard (name → type → price → description).

Purpose: Enable FSM-based wizard pattern for collecting package data step-by-step with validation at each stage, following existing PricingSetupStates pattern from admin.py.
Output: ContentPackageStates StatesGroup with 4 states for wizard flow.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-admin-menu-content-management/07-CONTEXT.md
@.planning/phases/07-admin-menu-content-management/07-RESEARCH.md

@bot/states/admin.py
@.planning/phases/07-admin-menu-content-management/07-01-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add ContentPackageStates FSM state group</name>
  <files>bot/states/admin.py</files>
  <action>
Add ContentPackageStates class to bot/states/admin.py after PricingSetupStates:

1. Add at end of file (after PricingSetupStates class):

```python
class ContentPackageStates(StatesGroup):
    """
    Estados para creación de paquetes de contenido.

    Flujo:
    1. Admin selecciona "Crear Paquete"
    2. Bot entra en waiting_for_name
    3. Admin envía nombre: "Colección Verano"
    4. Bot entra en waiting_for_type
    5. Admin selecciona tipo con botones: [VIP Premium] [VIP Content] [Free Content]
    6. Bot entra en waiting_for_price
    7. Admin envía precio o /skip: "9.99" o "/skip"
    8. Bot entra en waiting_for_description
    9. Admin envía descripción o /skip: "Contenido exclusivo..."
    10. Bot crea paquete y sale del estado

    Validación:
    - Nombre: No vacío, máximo 200 caracteres
    - Tipo: Debe seleccionar con botones (3 opciones)
    - Precio: Opcional, si se envía debe ser número >= 0
    - Descripción: Opcional, texto libre
    - /skip: Permite omitir campos opcionales
    - Cancelar: Vuelve al menú principal sin guardar

    Estados:
    - waiting_for_name: Esperando nombre del paquete (texto)
    - waiting_for_type: Esperando tipo de paquete (botones inline)
    - waiting_for_price: Esperando precio (número o /skip)
    - waiting_for_description: Esperando descripción (texto o /skip)
    """

    # Paso 1: Esperando nombre del paquete (required)
    waiting_for_name = State()

    # Paso 2: Esperando tipo de paquete via botones inline (required)
    waiting_for_type = State()

    # Paso 3: Esperando precio del paquete (optional, /skip to omit)
    waiting_for_price = State()

    # Paso 4: Esperando descripción del paquete (optional, /skip to omit)
    waiting_for_description = State()
```

2. Pattern reference: Follow PricingSetupStates structure (lines 112-142 in existing admin.py)

DO NOT:
- Modify existing FSM state classes (ChannelSetupStates, WaitTimeSetupStates, etc.)
- Add extra states beyond the 4 defined
- Change state naming convention (waiting_for_*)
- Add FSM logic (handlers in plan 07-04)
  </action>
  <verify>
1. ContentPackageStates class added to bot/states/admin.py
2. Has 4 states: waiting_for_name, waiting_for_type, waiting_for_price, waiting_for_description
3. Extends StatesGroup
4. Has comprehensive docstring with flow description
5. Follows PricingSetupStates pattern
6. Existing FSM state classes unchanged
  </verify>
  <done>
ContentPackageStates FSM state group created with 4 states for content package creation wizard.
  </done>
</task>

</tasks>

<verification>
Overall phase verification:
1. ContentPackageStates class exists in bot/states/admin.py
2. Has 4 State objects defined
3. Docstring explains wizard flow completely
4. Follows existing FSM state pattern (PricingSetupStates)
5. No existing states modified
</verification>

<success_criteria>
1. FSM states can be imported: from bot.states.admin import ContentPackageStates
2. States are accessible: ContentPackageStates.waiting_for_name, etc.
3. States ready for handler integration (plan 07-04)
</success_criteria>

<output>
After completion, create `.planning/phases/07-admin-menu-content-management/07-03-SUMMARY.md`
</output>
